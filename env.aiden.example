# env.aiden.example
# Copy to .env.aiden and configure for your environment
# Usage: docker-compose --env-file .env.aiden -f docker-compose.aiden.yaml up -d

# ===========================================
# RESILIENT ARCHITECTURE
# ===========================================
# This setup uses:
# - Supabase PostgreSQL: Cloud database for user/settings persistence
# - Tailscale: Mesh VPN for secure access to LAN services from anywhere
#
# Benefits:
# - Power outage? DB still in cloud, access from any device
# - Away from home? Tailscale connects you to LAN services
# - Internet down? Local services still work on LAN

# ===========================================
# Database (Supabase - REQUIRED)
# ===========================================
# Get from: Supabase Dashboard > Settings > Database > Connection string > URI
# Format: postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres.xxxxx:YOUR_PASSWORD@aws-0-us-west-1.pooler.supabase.com:6543/postgres

# ===========================================
# Authentication (CRITICAL - same across ALL instances)
# ===========================================
# Generate once: openssl rand -hex 32
# Use the SAME key on MacBook, RTX 3090, and any other instance
WEBUI_SECRET_KEY=generate-with-openssl-rand-hex-32

# ===========================================
# Tailscale IPs (stable mesh VPN addresses)
# ===========================================
# After `tailscale up` on each device, get IPs with `tailscale ip`
# These IPs work from anywhere on your tailnet

# RTX 3090 Edge Server (runs GITS Gateway, Aiden API)
RTX3090_TAILSCALE_IP=100.x.x.x

# DGX Spark Head Node (runs vLLM inference, TTS Gateway)
SPARK_99B5_TAILSCALE_IP=100.x.x.x

# DGX Spark Worker Node
SPARK_D97B_TAILSCALE_IP=100.x.x.x

# ===========================================
# Aiden Services (via Tailscale)
# ===========================================
# GITS Gateway - Cascading LLM inference router
# When on LAN: http://rtx3090.local:8080
# Via Tailscale: http://${RTX3090_TAILSCALE_IP}:8080
OLLAMA_BASE_URL=http://100.x.x.x:8080

# Aiden Jobs API
AIDEN_API_BASE_URL=http://100.x.x.x:8000

# ===========================================
# TTS Gateway (configured in UI, stored in DB)
# ===========================================
# Set in: Admin Settings > Audio > Text-to-Speech > API Base URL
# Value: http://${SPARK_99B5_TAILSCALE_IP}:8800/v1
# (This is stored in Supabase, so it syncs across instances)

# ===========================================
# Feature Flags
# ===========================================
ENABLE_SIGNUP=false
WEBUI_PORT=3000

# ===========================================
# Fallback LAN IPs (if Tailscale unavailable)
# ===========================================
SPARK_99B5_LAN_IP=192.168.86.48
SPARK_D97B_LAN_IP=169.254.199.85
